<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Helpdesk Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="app.css" rel="stylesheet">
    <link href="app.js" rel="js">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav-container">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <span>Campus Helpdesk</span>
            </div>
            <ul class="nav-menu">
                <li><a href="#" class="nav-link" onclick="showPage('home')">Home</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('submit')">Submit Complaint</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('track')">Track Complaint</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('mycomplaints')">My Complaints</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('admin')">Admin</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('team')">Team</a></li>
                <li><button class="theme-toggle" onclick="toggleTheme()"><i class="fas fa-moon"></i></button></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Home Page -->
        <div id="home" class="page active">
            <section class="hero">
                <h1>Campus Helpdesk Portal</h1>
                <p>Campus Helpdesk - Your problems, our priority</p>
                <div class="cta-buttons">
                    <button class="btn btn-primary" onclick="showPage('submit')">Submit Complaint</button>
                    <button class="btn btn-secondary" onclick="showPage('track')">Track Status</button>
                </div>
            </section>

            <section class="features">
                <h2>How We Help You</h2>
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon"><i class="fas fa-edit"></i></div>
                        <h3>Submit Issues</h3>
                        <p>Easily report hostel, academic, or IT-related problems with our simple form</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon"><i class="fas fa-search"></i></div>
                        <h3>Track Progress</h3>
                        <p>Monitor your complaint status in real-time with unique tracking IDs</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon"><i class="fas fa-clock"></i></div>
                        <h3>Quick Resolution</h3>
                        <p>Our dedicated team ensures fast and efficient problem resolution</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- Submit Complaint Page -->
        <div id="submit" class="page">
            <div class="form-container">
                <h2 style="text-align: center; margin-bottom: 2rem; color: var(--primary-color);">Submit New Complaint</h2>
                <form id="complaintForm">
                    <div class="form-group">
                        <label class="form-label">Full Name *</label>
                        <input type="text" class="form-input" id="studentName" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">AFN Number *</label>
                        <input type="text" class="form-input" id="afnNumber" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Department *</label>
                        <select class="form-input" id="department" required>
                            <option value="">Select Department</option>
                            <option value="Computer Science">Computer Science</option>
                            <option value="Mechanical">Mechanical Engineering</option>
                            <option value="Electrical">Electrical Engineering</option>
                            <option value="Civil">Civil Engineering</option>
                            <option value="Electronics">Electronics & Communication</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Category *</label>
                        <select class="form-input" id="category" required>
                            <option value="">Select Category</option>
                            <option value="Hostel">Hostel Issues</option>
                            <option value="Academic">Academic Problems</option>
                            <option value="IT">IT Support</option>
                            <option value="Library">Library Services</option>
                            <option value="Transport">Transportation</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Description *</label>
                        <textarea class="form-input form-textarea" id="description" placeholder="Describe your problem in detail..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Attach File (Optional)</label>
                        <input type="file" class="form-input" id="attachment">
                    </div>
                    
                    <button type="submit" class="btn btn-submit" style="width: 100%;" id="submitBtn">
                        <i class="fas fa-paper-plane" style="margin-right: 0.5rem;"></i>
                        Submit Complaint
                    </button>
                </form>
            </div>
        </div>

        <!-- Track Complaint Page -->
        <div id="track" class="page">
            <div class="form-container">
                <h2 style="text-align: center; margin-bottom: 2rem; color: var(--primary-color);">Track Your Complaint</h2>
                
                <div class="form-group">
                    <label class="form-label">Enter Complaint ID</label>
                    <input type="text" class="form-input" id="trackingId" placeholder="e.g., CHD-2024-001">
                </div>
                
                <button class="btn btn-primary" style="width: 100%;" onclick="trackComplaint()">
                    Track Status
                </button>
                
                <div id="trackingResult" style="margin-top: 2rem; display: none;">
                    <!-- Tracking results will be displayed here -->
                </div>
            </div>
        </div>

        <!-- My Complaints Page -->
        <div id="mycomplaints" class="page">
            <div style="max-width: 1000px; margin: 2rem auto; padding: 0 2rem;">
                <h2 style="text-align: center; margin-bottom: 2rem; color: var(--primary-color);">My Complaints</h2>
                
                <div class="form-group">
                    <label class="form-label">Enter Your AFN Number to View Your Complaints</label>
                    <div style="display: flex; gap: 1rem;">
                        <input type="text" class="form-input" id="studentAfn" placeholder="Enter your AFN number" style="flex: 1;">
                        <button class="btn btn-primary" onclick="loadMyComplaints()">
                            View My Complaints
                        </button>
                    </div>
                </div>
                
                <div id="myComplaintsResult" style="margin-top: 2rem; display: none;">
                    <!-- Student's complaints will be displayed here -->
                </div>
            </div>
        </div>

        <!-- Admin Page -->
        <div id="admin" class="page">
            <div id="adminLogin" class="form-container">
                <h2 style="text-align: center; margin-bottom: 2rem; color: var(--primary-color);">Admin Login</h2>
                
                <div class="form-group">
                    <label class="form-label">Username</label>
                    <input type="text" class="form-input" id="adminUsername" value="admin">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="adminPassword" value="admin123">
                </div>
                
                <button class="btn btn-primary" style="width: 100%;" onclick="adminLogin()">
                    Login
                </button>
            </div>

            <div id="adminDashboard" style="display: none; padding: 2rem;">
                <h2 style="text-align: center; margin-bottom: 2rem; color: var(--primary-color);">Admin Dashboard</h2>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalComplaints">0</div>
                        <div>Total Complaints</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pendingComplaints">0</div>
                        <div>Pending</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="progressComplaints">0</div>
                        <div>In Progress</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="resolvedComplaints">0</div>
                        <div>Resolved</div>
                    </div>
                </div>

                <div class="form-group">
                    <input type="text" class="form-input" id="searchComplaints" placeholder="Search complaints..." onkeyup="filterComplaints()">
                </div>

                <div class="complaints-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Category</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="complaintsTableBody">
                            <!-- Complaints will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Team Page -->
        <div id="team" class="page">
            <section style="padding: 2rem;">
                <h2 style="text-align: center; margin-bottom: 3rem; color: var(--primary-color);">Meet The Compiler Crew</h2>
                
                <div class="team-grid">
                    <div class="team-card">
                        <div class="team-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <h3>Adarsh Kushwaha</h3>
                        <p>Frontend and Backend Developer</p>
                        <p style="color: var(--text-light); font-size: 0.9rem;">B.Tech CSE, First Year</p>
                    </div>
                    
                    <div class="team-card">
                        <div class="team-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <h3>Ayush Dwivedi</h3>
                        <p>UI/UX Designer</p>
                        <p style="color: var(--text-light); font-size: 0.9rem;">B.Tech CSE, First Year</p>
                    </div>
                    
                    <div class="team-card">
                        <div class="team-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <h3>Aqdas Fareeq</h3>
                        <p>Pitching Expert</p>
                        <p style="color: var(--text-light); font-size: 0.9rem;">B.Tech CSE, First Year</p>
                    </div>
                    
                    <div class="team-card">
                        <div class="team-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <h3>Ansh Pal</h3>
                        <p>PPT Specialist</p>
                        <p style="color: var(--text-light); font-size: 0.9rem;">B.Tech CSE, First Year</p>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 3rem; padding: 2rem; background: var(--white); border-radius: 1rem; box-shadow: var(--shadow);">
                    <h3 style="color: var(--primary-color); margin-bottom: 1rem;">Kanpur Institute of Technology</h3>
                    <p>This project was developed as part of our Web Development course to create a practical solution for student grievances and support services.</p>
                </div>
            </section>
        </div>
    </main>

    <!-- Notification -->
    <div id="notification" class="notification">
        <div class="notification-content">
            <i id="notificationIcon" class="notification-icon fas fa-check-circle"></i>
            <span id="notificationText" class="notification-text"></span>
        </div>
    </div>

    <!-- Chatbot -->
    <div class="chatbot">
        <button class="chatbot-toggle" onclick="toggleChatbot()">
            <i class="fas fa-comments"></i>
        </button>
        
        <div id="chatbotWindow" class="chatbot-window">
            <div class="chatbot-header">
                <span>Campus Helpdesk Assistant</span>
                <button style="float: right; background: none; border: none; color: white; cursor: pointer;" onclick="toggleChatbot()">Ã—</button>
            </div>
            
            <div class="chatbot-messages" id="chatbotMessages">
                <div class="message bot">
                    Hi! I'm your Campus Helpdesk Assistant. How can I help you today?
                </div>
            </div>
            
            <div class="chatbot-input">
                <input type="text" class="form-input" id="chatbotInput" placeholder="Type your message..." onkeypress="handleChatbotInput(event)">
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let complaints = JSON.parse(localStorage.getItem('complaints')) || [];
        let isAdminLoggedIn = false;
        let complaintIdCounter = parseInt(localStorage.getItem('complaintIdCounter')) || 1;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            updateAdminStats();
            loadComplaintsTable();
        });

        // Page navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update admin dashboard if admin page is shown
            if (pageId === 'admin' && isAdminLoggedIn) {
                updateAdminStats();
                loadComplaintsTable();
            }
        }

        // Theme toggle
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.querySelector('.theme-toggle i');
            
            if (body.getAttribute('data-theme') === 'dark') {
                body.removeAttribute('data-theme');
                themeIcon.className = 'fas fa-moon';
                localStorage.setItem('theme', 'light');
            } else {
                body.setAttribute('data-theme', 'dark');
                themeIcon.className = 'fas fa-sun';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Load saved theme
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.body.setAttribute('data-theme', 'dark');
            document.querySelector('.theme-toggle i').className = 'fas fa-sun';
        }

        // Submit complaint form
        document.getElementById('complaintForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.innerHTML;
            
            // Show loading state
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin" style="margin-right: 0.5rem;"></i>Submitting...';
            
            // Simulate processing time for better UX
            setTimeout(() => {
                // Get form data
                const formData = {
                    id: `CHD-2024-${String(complaintIdCounter).padStart(3, '0')}`,
                    name: document.getElementById('studentName').value,
                    afn: document.getElementById('afnNumber').value,
                    department: document.getElementById('department').value,
                    category: document.getElementById('category').value,
                    description: document.getElementById('description').value,
                    status: 'Pending',
                    date: new Date().toLocaleDateString(),
                    time: new Date().toLocaleTimeString()
                };

                // Add to complaints array
                complaints.push(formData);
                
                // Save to localStorage
                localStorage.setItem('complaints', JSON.stringify(complaints));
                localStorage.setItem('complaintIdCounter', complaintIdCounter + 1);
                
                // Increment counter
                complaintIdCounter++;
                
                // Show success state
                submitBtn.innerHTML = '<i class="fas fa-check" style="margin-right: 0.5rem;"></i>Submitted Successfully!';
                
                // Show enhanced success notification
                showNotification(
                    `ðŸŽ‰ Complaint submitted successfully!\nðŸ“‹ Your tracking ID: ${formData.id}\nðŸ“§ Confirmation sent to your email`, 
                    'success'
                );
                
                // Reset form after delay
                setTimeout(() => {
                    this.reset();
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = originalText;
                }, 2000);
                
                // Update admin stats if logged in
                if (isAdminLoggedIn) {
                    updateAdminStats();
                    loadComplaintsTable();
                }
            }, 1500);
        });

        // Track complaint
        function trackComplaint() {
            const trackingId = document.getElementById('trackingId').value.trim();
            const resultDiv = document.getElementById('trackingResult');
            
            if (!trackingId) {
                showNotification('Please enter a complaint ID', 'error');
                return;
            }
            
            // Find complaint
            const complaint = complaints.find(c => c.id === trackingId);
            
            if (complaint) {
                resultDiv.innerHTML = `
                    <div style="background: var(--white); padding: 2rem; border-radius: 0.5rem; box-shadow: var(--shadow);">
                        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">Complaint Details</h3>
                        <p><strong>ID:</strong> ${complaint.id}</p>
                        <p><strong>Name:</strong> ${complaint.name}</p>
                        <p><strong>Category:</strong> ${complaint.category}</p>
                        <p><strong>Status:</strong> <span class="status-badge status-${complaint.status.toLowerCase().replace(' ', '')}">${complaint.status}</span></p>
                        <p><strong>Submitted:</strong> ${complaint.date} at ${complaint.time}</p>
                        <p><strong>Description:</strong> ${complaint.description}</p>
                    </div>
                `;
                resultDiv.style.display = 'block';
            } else {
                showNotification('Complaint ID not found', 'error');
                resultDiv.style.display = 'none';
            }
        }

        // Admin login
        function adminLogin() {
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;
            
            // Simple hardcoded authentication
            if (username === 'admin' && password === 'admin123') {
                isAdminLoggedIn = true;
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'block';
                updateAdminStats();
                loadComplaintsTable();
                showNotification('Admin login successful!', 'success');
            } else {
                showNotification('Invalid credentials', 'error');
            }
        }

        // Update admin statistics
        function updateAdminStats() {
            const total = complaints.length;
            const pending = complaints.filter(c => c.status === 'Pending').length;
            const progress = complaints.filter(c => c.status === 'In Progress').length;
            const resolved = complaints.filter(c => c.status === 'Resolved').length;
            
            document.getElementById('totalComplaints').textContent = total;
            document.getElementById('pendingComplaints').textContent = pending;
            document.getElementById('progressComplaints').textContent = progress;
            document.getElementById('resolvedComplaints').textContent = resolved;
        }

        // Load complaints table
        function loadComplaintsTable() {
            const tbody = document.getElementById('complaintsTableBody');
            tbody.innerHTML = '';
            
            complaints.forEach((complaint, index) => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${complaint.id}</td>
                    <td>${complaint.name}</td>
                    <td>${complaint.category}</td>
                    <td><span class="status-badge status-${complaint.status.toLowerCase().replace(' ', '')}">${complaint.status}</span></td>
                    <td>
                        <select onchange="updateComplaintStatus(${index}, this.value)" style="padding: 0.25rem; border-radius: 0.25rem; border: 1px solid #ccc;">
                            <option value="Pending" ${complaint.status === 'Pending' ? 'selected' : ''}>Pending</option>
                            <option value="In Progress" ${complaint.status === 'In Progress' ? 'selected' : ''}>In Progress</option>
                            <option value="Resolved" ${complaint.status === 'Resolved' ? 'selected' : ''}>Resolved</option>
                        </select>
                        <button onclick="deleteComplaint(${index})" style="margin-left: 0.5rem; padding: 0.25rem 0.5rem; background: var(--danger-color); color: white; border: none; border-radius: 0.25rem; cursor: pointer;">Delete</button>
                    </td>
                `;
            });
        }

        // Load student's own complaints
        function loadMyComplaints() {
            const afnNumber = document.getElementById('studentAfn').value.trim();
            const resultDiv = document.getElementById('myComplaintsResult');
            
            if (!afnNumber) {
                showNotification('Please enter your AFN number', 'error');
                return;
            }
            
            // Filter complaints by AFN number
            const myComplaints = complaints.filter(c => c.afn === afnNumber);
            
            if (myComplaints.length === 0) {
                resultDiv.innerHTML = `
                    <div style="text-align: center; padding: 2rem; background: var(--white); border-radius: 0.5rem; box-shadow: var(--shadow);">
                        <i class="fas fa-inbox" style="font-size: 3rem; color: var(--text-light); margin-bottom: 1rem;"></i>
                        <h3 style="color: var(--text-light);">No Complaints Found</h3>
                        <p style="color: var(--text-light);">You haven't submitted any complaints yet.</p>
                    </div>
                `;
            } else {
                let complaintsHtml = `
                    <div style="background: var(--white); border-radius: 0.5rem; box-shadow: var(--shadow); overflow: hidden;">
                        <div style="background: var(--primary-color); color: white; padding: 1rem;">
                            <h3><i class="fas fa-list"></i> Your Complaints (${myComplaints.length})</h3>
                        </div>
                        <div style="padding: 1rem;">
                `;
                
                myComplaints.forEach(complaint => {
                    complaintsHtml += `
                        <div style="border: 1px solid #e2e8f0; border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 1rem; background: var(--light-bg);">
                            <div style="display: flex; justify-content: between; align-items: start; margin-bottom: 1rem;">
                                <div style="flex: 1;">
                                    <h4 style="color: var(--primary-color); margin-bottom: 0.5rem;">
                                        <i class="fas fa-ticket-alt"></i> ${complaint.id}
                                    </h4>
                                    <p style="margin-bottom: 0.5rem;"><strong>Category:</strong> ${complaint.category}</p>
                                    <p style="margin-bottom: 0.5rem;"><strong>Department:</strong> ${complaint.department}</p>
                                </div>
                                <span class="status-badge status-${complaint.status.toLowerCase().replace(' ', '')}">${complaint.status}</span>
                            </div>
                            
                            <div style="margin-bottom: 1rem;">
                                <p style="margin-bottom: 0.5rem;"><strong>Description:</strong></p>
                                <p style="background: var(--white); padding: 1rem; border-radius: 0.25rem; border-left: 4px solid var(--primary-color);">
                                    ${complaint.description}
                                </p>
                            </div>
                            
                            <div style="display: flex; justify-content: between; align-items: center; font-size: 0.9rem; color: var(--text-light);">
                                <span><i class="fas fa-calendar"></i> Submitted: ${complaint.date} at ${complaint.time}</span>
                                <button onclick="copyComplaintId('${complaint.id}')" style="padding: 0.25rem 0.75rem; background: var(--primary-color); color: white; border: none; border-radius: 0.25rem; cursor: pointer; font-size: 0.8rem;">
                                    <i class="fas fa-copy"></i> Copy ID
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                complaintsHtml += `
                        </div>
                    </div>
                `;
                
                resultDiv.innerHTML = complaintsHtml;
            }
            
            resultDiv.style.display = 'block';
        }

        // Copy complaint ID to clipboard
        function copyComplaintId(complaintId) {
            navigator.clipboard.writeText(complaintId).then(() => {
                showNotification(`Complaint ID ${complaintId} copied to clipboard!`, 'success');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = complaintId;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showNotification(`Complaint ID ${complaintId} copied to clipboard!`, 'success');
            });
        }

        // Update complaint status
        function updateComplaintStatus(index, newStatus) {
            complaints[index].status = newStatus;
            localStorage.setItem('complaints', JSON.stringify(complaints));
            updateAdminStats();
            loadComplaintsTable();
            showNotification(`Complaint status updated to ${newStatus}`, 'success');
        }

        // Delete complaint
        function deleteComplaint(index) {
            if (confirm('Are you sure you want to delete this complaint?')) {
                complaints.splice(index, 1);
                localStorage.setItem('complaints', JSON.stringify(complaints));
                updateAdminStats();
                loadComplaintsTable();
                showNotification('Complaint deleted successfully', 'success');
            }
        }

        // Filter complaints
        function filterComplaints() {
            const searchTerm = document.getElementById('searchComplaints').value.toLowerCase();
            const rows = document.querySelectorAll('#complaintsTableBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            const notificationIcon = document.getElementById('notificationIcon');
            
            // Set icon based on type
            if (type === 'success') {
                notificationIcon.className = 'notification-icon fas fa-check-circle';
            } else if (type === 'error') {
                notificationIcon.className = 'notification-icon fas fa-exclamation-circle';
            }
            
            // Handle multiline messages
            notificationText.innerHTML = message.replace(/\n/g, '<br>');
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            // Auto-hide after longer duration for success messages
            const duration = type === 'success' ? 5000 : 3000;
            setTimeout(() => {
                notification.classList.remove('show');
            }, duration);
        }

        // Chatbot functionality
        function toggleChatbot() {
            const chatbotWindow = document.getElementById('chatbotWindow');
            chatbotWindow.classList.toggle('active');
        }

        function handleChatbotInput(event) {
            if (event.key === 'Enter') {
                const input = document.getElementById('chatbotInput');
                const message = input.value.trim();
                
                if (message) {
                    addChatMessage(message, 'user');
                    input.value = '';
                    
                    // Simulate bot response
                    setTimeout(() => {
                        const response = getChatbotResponse(message);
                        addChatMessage(response, 'bot');
                    }, 1000);
                }
            }
        }

        function addChatMessage(message, sender) {
            const messagesContainer = document.getElementById('chatbotMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            messageDiv.textContent = message;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function getChatbotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('hello') || lowerMessage.includes('hi')) {
                return 'Hello! How can I help you with your campus-related queries?';
            } else if (lowerMessage.includes('complaint') || lowerMessage.includes('problem')) {
                return 'You can submit a complaint using our Submit Complaint page. You\'ll get a unique tracking ID to monitor progress.';
            } else if (lowerMessage.includes('track') || lowerMessage.includes('status')) {
                return 'To track your complaint, go to the Track Complaint page and enter your complaint ID. You can also view all your complaints in the "My Complaints" section using your AFN number.';
            } else if (lowerMessage.includes('forgot') || lowerMessage.includes('id') || lowerMessage.includes('afn')) {
                return 'If you forgot your complaint ID, go to "My Complaints" page and enter your AFN number to see all your submitted complaints with their IDs.';
            } else if (lowerMessage.includes('hostel')) {
                return 'For hostel-related issues, please submit a complaint under the "Hostel" category. Our team will address it promptly.';
            } else if (lowerMessage.includes('academic')) {
                return 'Academic issues can be reported through our complaint system. Select "Academic Problems" as the category.';
            } else if (lowerMessage.includes('contact') || lowerMessage.includes('phone')) {
                return 'You can reach us at: helpdesk@chd.ac.in or call +91-512-123-4567';
            } else {
                return 'I understand you need help. Please use our complaint system for detailed assistance, or contact our support team directly.';
            }
        }

        // Add some sample data for demonstration
        if (complaints.length === 0) {
            const sampleComplaints = [
                {
                    id: 'CHD-2024-001',
                    name: 'John Doe',
                    afn: 'AFN001',
                    department: 'Computer Science',
                    category: 'IT',
                    description: 'WiFi not working in hostel room',
                    status: 'In Progress',
                    date: '2024-01-15',
                    time: '10:30 AM'
                },
                {
                    id: 'CHD-2024-002',
                    name: 'Jane Smith',
                    afn: 'AFN002',
                    department: 'Mechanical',
                    category: 'Hostel',
                    description: 'Water supply issue in Block A',
                    status: 'Resolved',
                    date: '2024-01-14',
                    time: '2:15 PM'
                }
            ];
            
            complaints = sampleComplaints;
            localStorage.setItem('complaints', JSON.stringify(complaints));
            complaintIdCounter = 3;
            localStorage.setItem('complaintIdCounter', complaintIdCounter);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98e0d8f5340d59ee',t:'MTc2MDM3OTU5MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
